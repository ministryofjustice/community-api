plugins {
    id("uk.gov.justice.hmpps.gradle-spring-boot") version "0.3.0"
    id 'groovy'
}

group = 'uk.gov.justice.digital.delius'

ext["spring-security.version"] = "5.3.2.RELEASE"

dependencies {
    implementation files('lib/ojdbc8-12.2.0.1.jar')

    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.11.0'
    implementation 'io.jsonwebtoken:jjwt:0.9.1'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-data-ldap'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.security.oauth:spring-security-oauth2:2.4.1.RELEASE'
    implementation 'org.springframework.security:spring-security-jwt:1.1.0.RELEASE'

    implementation 'org.hibernate:hibernate-java8:5.4.5.Final'
    implementation 'com.unboundid:unboundid-ldapsdk:4.0.14'
    implementation 'io.springfox:springfox-swagger2:2.9.2'
    implementation 'io.springfox:springfox-swagger-ui:2.9.2'
    implementation 'io.springfox:springfox-bean-validators:2.9.2'
    implementation 'org.flywaydb:flyway-core:6.4.2'
    implementation 'com.zaxxer:HikariCP:3.4.5'
    implementation 'commons-io:commons-io:2.6'
    implementation 'org.apache.commons:commons-lang3:3.10'
    implementation 'org.apache.commons:commons-text:1.8'
    implementation 'io.swagger:swagger-core:1.6.1'

    annotationProcessor 'org.projectlombok:lombok:1.18.12'
    compileOnly 'org.projectlombok:lombok:1.18.12'

    testRuntime 'com.h2database:h2:1.4.200'
    runtime 'com.h2database:h2:1.4.200'
    testAnnotationProcessor 'org.projectlombok:lombok:1.18.12'
    testCompileOnly 'org.projectlombok:lombok:1.18.12'

    testImplementation 'org.codehaus.groovy.modules.http-builder:http-builder:0.7.1'
    testImplementation 'junit:junit:4.13'
    testImplementation ('io.rest-assured:rest-assured:3.3.0'){
        exclude group: 'com.sun.xml.bind', module: 'jaxb-osgi'
    }
    testImplementation 'io.rest-assured:spring-mock-mvc:3.3.0'
    testImplementation "com.github.tomakehurst:wiremock:2.26.3"
    testImplementation 'io.swagger.parser.v3:swagger-parser-v2-converter:2.0.19'
}

test {
    timeout = Duration.ofMinutes(15)
    useJUnitPlatform ()
    testLogging {
        events "started", "passed", "skipped", "failed", "standardError"
        exceptionFormat "short"
        showStackTraces = true
        showExceptions = true
        showCauses = true
    }
    minHeapSize = "128m"
    maxHeapSize = "1024m"
}
